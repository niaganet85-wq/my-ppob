<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUPER ADMIN - MANAGE BANNER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js";
        // Tambahkan 'push' untuk menambah data baru tanpa menimpa
        import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.8.1/firebase-database.js";

        const firebaseConfig = {
          apiKey: "AIzaSyAIxFEDC9QBYsOyPFFL5tUBz1I8mlH66Hs",
          authDomain: "games-ku.firebaseapp.com",
          databaseURL: "https://games-ku-default-rtdb.firebaseio.com",
          projectId: "games-ku",
          storageBucket: "games-ku.firebasestorage.app",
          messagingSenderId: "488423956",
          appId: "1:488423956:web:79f659dee525fdbc76dd01",
          measurementId: "G-JYEJK67H4V"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // --- FUNGSI TAMBAH BANNER BARU (SLIDE) ---
        window.tambahBanner = () => {
            const url = document.getElementById('url-banner').value;
            if(!url) return alert("Link URL Kosong!");
            
            // Gunakan 'push' agar banner bertambah, bukan menimpa
            push(ref(db, 'banners'), {
                url: url
            }).then(() => {
                alert("Banner Berhasil Ditambahkan!");
                document.getElementById('url-banner').value = "";
            });
        };

        // --- FUNGSI HAPUS BANNER ---
        window.hapusBanner = (id) => {
            if(confirm("Hapus banner ini?")) {
                remove(ref(db, 'banners/' + id));
            }
        };

        // --- LOAD DAFTAR BANNER ---
        onValue(ref(db, 'banners'), (snap) => {
            const data = snap.val();
            const list = document.getElementById('list-banner');
            list.innerHTML = "";
            
            if(data) {
                Object.keys(data).forEach(key => {
                    const banner = data[key];
                    list.innerHTML += `
                    <div class="relative w-full h-24 rounded-xl overflow-hidden group border border-gray-600 mb-3">
                        <img src="${banner.url}" class="w-full h-full object-cover">
                        <button onclick="hapusBanner('${key}')" class="absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full shadow-lg text-xs hover:bg-red-700">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>`;
                });
            } else {
                list.innerHTML = "<p class='text-gray-500 text-center text-xs'>Belum ada banner slide.</p>";
            }
        });

        // (Kode Produk & Kategori lainnya tetap sama seperti sebelumnya, 
        //  tapi fokus di sini saya berikan update Banner-nya saja agar rapi)
    </script>
</head>
<body class="bg-[#0f172a] text-white font-sans p-6">

    <div class="mb-6">
        <h1 class="font-black text-2xl italic">KELOLA BANNER</h1>
        <p class="text-xs text-gray-400">Upload link gambar untuk slide show</p>
    </div>

    <div class="bg-[#1e293b] p-4 rounded-[1.5rem] border border-slate-700 shadow-lg mb-6">
        <div class="flex gap-2 mb-4">
            <input id="url-banner" class="w-full bg-[#0f172a] p-3 rounded-xl text-xs border border-slate-600 outline-none text-white" placeholder="Tempel Link Gambar Banner...">
            <button onclick="tambahBanner()" class="bg-blue-600 px-4 rounded-xl font-bold text-xs"><i class="fas fa-plus"></i></button>
        </div>
        
        <h3 class="text-[10px] font-bold text-gray-400 uppercase mb-2">Banner Aktif (Slide):</h3>
        <div id="list-banner" class="grid grid-cols-2 gap-3">
            </div>
    </div>

    <a href="admin.html" class="block text-center text-gray-500 text-xs mt-10">Kembali ke Dashboard Utama</a>

</body>
</html>
